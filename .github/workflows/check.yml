---
name: Check

on:
  pull_request:
    branches:
      - master

jobs:
  spotless:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/setup-java@99b8673ff64fbf99d8d325f52d9a5bdedb8483e9 # v4.2.1
        with:
          distribution: temurin
          java-version: 17

      - name: Checkout
        uses: actions/checkout@692973e3d937129bcbf40652eb9f2f61becf3332 # v4.1.7

      - name: Check formatting
        run: |
          ./gradlew spotlessCheck

  check:
    uses: wetransform/gha-workflows/.github/workflows/gradle-library-check.yml@feat/multi-module-improvements
    with:
      java-version: 17
      multi-module: true
      skip-scan: true
      gradle-tasks: '--continue clean check' # perform all tasks even if tests of one project fail
    secrets:
      WETF_ARTIFACTORY_USER: ${{ secrets.WETF_ARTIFACTORY_USER }}
      WETF_ARTIFACTORY_PASSWORD: ${{ secrets.WETF_ARTIFACTORY_PASSWORD }}
